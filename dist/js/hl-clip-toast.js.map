{"version":3,"file":"hl-clip-toast.js","sources":["../../build/js/Core.js","../../build/js/hl-clip-toast.js"],"sourcesContent":["class Core {\r\n    // Default class strings\r\n    static DEFAULT_BUTTON_CLASS = 'btn btn-sm btn-primary position-absolute top-0 end-0 m-2 clipboard-btn';\r\n    static DEFAULT_WRAPPER_CLASS = 'position-relative';\r\n    static DEFAULT_ICON = 'bi bi-clipboard';\r\n    static DEFAULT_ICON_SUCCESS = 'bi bi-check-lg';\r\n    static DEFAULT_MESSAGE_SUCCESS = 'Code copied to clipboard';\r\n    static DEFAULT_MESSAGE_ERROR = 'Error copying the code';\r\n    static DEFAULT_MESSAGE_UNSUPPORTED = 'Clipboard API is not available.';\r\n    static DEFAULT_ICON_DELAY = 1500;\r\n    static DEFAULT_ICON_TIMEOUT = 1500;\r\n\r\n    // Default valid class lists (used if validation is enabled)\r\n    static defaultValidButtonClasses = [\r\n        'btn', 'btn-sm', 'btn-primary', 'btn-success', 'btn-danger', 'btn-warning',\r\n        'position-absolute', 'top-0', 'end-0', 'm-2', 'clipboard-btn'\r\n    ];\r\n\r\n    static defaultValidWrapperClasses = [\r\n        'position-relative', 'custom-wrapper-class'\r\n    ];\r\n\r\n    constructor(config = {}) {\r\n        this.config = {\r\n            iconDefault: Core.DEFAULT_ICON ,\r\n            iconSuccess: Core.DEFAULT_ICON_SUCCESS,\r\n            iconResetDelay: Core.DEFAULT_ICON_DELAY,\r\n            messageSuccess: Core.DEFAULT_MESSAGE_SUCCESS,\r\n            messageError: Core.DEFAULT_MESSAGE_ERROR,\r\n            messageClipboardUnsupported: Core.DEFAULT_MESSAGE_UNSUPPORTED,\r\n            buttonClass: Core.DEFAULT_BUTTON_CLASS,\r\n            wrapperClass: Core.DEFAULT_WRAPPER_CLASS,\r\n            closeButton: false,\r\n            progressBar: false,\r\n            timeOut: Core.DEFAULT_ICON_TIMEOUT,\r\n            validateClasses: true,\r\n            validButtonClasses: Core.defaultValidButtonClasses,\r\n            validWrapperClasses: Core.defaultValidWrapperClasses,\r\n            ...config\r\n        };\r\n    }\r\n\r\n    // Utility: Validate a string of classes against a whitelist\r\n    validateClassList(classString, validClasses) {\r\n        const classList = classString.trim().split(/\\s+/);\r\n        const invalid = classList.filter(cls => !validClasses.includes(cls));\r\n        return {\r\n            isValid: invalid.length === 0,\r\n            invalidClasses: invalid\r\n        };\r\n    }\r\n\r\n    // Apply validation if enabled; fallback to default class if invalid\r\n    getValidatedClass(inputClass, fallbackClass, validList, shouldValidate, label) {\r\n        if (!shouldValidate) return inputClass;\r\n\r\n        const { isValid, invalidClasses } = this.validateClassList(inputClass, validList);\r\n        if (!isValid) {\r\n            console.warn(`Invalid ${label} classes provided: ${invalidClasses.join(', ')}. Default class has been assigned.`);\r\n            return fallbackClass;\r\n        }\r\n        return inputClass;\r\n    }\r\n\r\n    // Create the clipboard button element\r\n    createClipboardButton(codeElement) {\r\n        const shouldValidate = this.config.validateClasses !== false;\r\n        const buttonClass = this.config.buttonClass || Core.DEFAULT_BUTTON_CLASS;\r\n\r\n        const finalButtonClass = this.getValidatedClass(\r\n            buttonClass,\r\n            Core.DEFAULT_BUTTON_CLASS,\r\n            this.config.validButtonClasses,\r\n            shouldValidate,\r\n            'button'\r\n        );\r\n\r\n        const button = document.createElement('button');\r\n        button.className = finalButtonClass;\r\n\r\n        const icon = document.createElement('i');\r\n        icon.className = this.config.iconDefault || Core.DEFAULT_ICON ;\r\n        button.appendChild(icon);\r\n\r\n        button.addEventListener('click', () => {\r\n            if (!navigator.clipboard) {\r\n                toastr.warning(this.config.messageClipboardUnsupported || Core.DEFAULT_MESSAGE_UNSUPPORTED);\r\n                return;\r\n            }\r\n\r\n            const code = codeElement.textContent;\r\n\r\n            navigator.clipboard.writeText(code).then(() => {\r\n                icon.className = this.config.iconSuccess || Core.DEFAULT_ICON_SUCCESS;\r\n\r\n                setTimeout(() => {\r\n                    icon.className = this.config.iconDefault || Core.DEFAULT_ICON ;\r\n                }, this.config.iconResetDelay || Core.DEFAULT_ICON_DELAY);\r\n\r\n                toastr.success(this.config.messageSuccess || Core.DEFAULT_MESSAGE_SUCCESS);\r\n            }).catch(() => {\r\n                toastr.error(this.config.messageError || Core.DEFAULT_MESSAGE_ERROR);\r\n            });\r\n        });\r\n\r\n        return button;\r\n    }\r\n\r\n    // Enhance all <pre><code> blocks on the page\r\n    enhanceCodeBlocks() {\r\n        hljs.highlightAll();\r\n\r\n        const shouldValidate = this.config.validateClasses !== false;\r\n        const wrapperClass = this.config.wrapperClass || Core.DEFAULT_WRAPPER_CLASS;\r\n\r\n        const finalWrapperClass = this.getValidatedClass(\r\n            wrapperClass,\r\n            Core.DEFAULT_WRAPPER_CLASS,\r\n            this.config.validWrapperClasses,\r\n            shouldValidate,\r\n            'wrapper'\r\n        );\r\n\r\n        document.querySelectorAll('pre > code').forEach(code => {\r\n            const pre = code.parentElement;\r\n\r\n            const wrapper = document.createElement('div');\r\n            wrapper.className = finalWrapperClass;\r\n\r\n            pre.parentNode.insertBefore(wrapper, pre);\r\n            wrapper.appendChild(pre);\r\n\r\n            const button = this.createClipboardButton(code);\r\n            wrapper.appendChild(button);\r\n        });\r\n    }\r\n\r\n    // Public method to fire the enhancement\r\n    fire() {\r\n        toastr.options = {\r\n            closeButton: this.config.closeButton ?? false,\r\n            progressBar: this.config.progressBar ?? false,\r\n            timeOut: this.config.timeOut ?? Core.DEFAULT_ICON_TIMEOUT,\r\n            escapeHtml: true,\r\n        };\r\n\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            this.enhanceCodeBlocks();\r\n        });\r\n    }\r\n\r\n    info() {\r\n        console.log(`Info Config:`, this.config);\r\n    }\r\n}\r\n\r\n// Exporta la clase Core como HCT\r\nexport default Core;\r\n","import Core from './Core';\r\n\r\n// Exponer Core en el objeto global `window` como `HCT`\r\nwindow.HCT = Core;"],"names":["Core","config","arguments","length","undefined","_classCallCheck","this","_objectSpread","iconDefault","DEFAULT_ICON","iconSuccess","DEFAULT_ICON_SUCCESS","iconResetDelay","DEFAULT_ICON_DELAY","messageSuccess","DEFAULT_MESSAGE_SUCCESS","messageError","DEFAULT_MESSAGE_ERROR","messageClipboardUnsupported","DEFAULT_MESSAGE_UNSUPPORTED","buttonClass","DEFAULT_BUTTON_CLASS","wrapperClass","DEFAULT_WRAPPER_CLASS","closeButton","progressBar","timeOut","DEFAULT_ICON_TIMEOUT","validateClasses","validButtonClasses","defaultValidButtonClasses","validWrapperClasses","defaultValidWrapperClasses","key","value","classString","validClasses","invalid","trim","split","filter","cls","includes","isValid","invalidClasses","inputClass","fallbackClass","validList","shouldValidate","label","_this$validateClassLi","validateClassList","console","warn","concat","join","codeElement","_this","finalButtonClass","getValidatedClass","button","document","createElement","className","icon","appendChild","addEventListener","navigator","clipboard","code","textContent","writeText","then","setTimeout","toastr","success","error","warning","_this2","hljs","highlightAll","finalWrapperClass","querySelectorAll","forEach","pre","parentElement","wrapper","parentNode","insertBefore","createClipboardButton","_this$config$closeBut","_this$config$progress","_this$config$timeOut","_this3","options","escapeHtml","enhanceCodeBlocks","log","_defineProperty","window","HCT"],"mappings":"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"}