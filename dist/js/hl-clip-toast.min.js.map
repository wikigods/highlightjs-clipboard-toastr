{"version":3,"file":"hl-clip-toast.min.js","sources":["../../build/js/core.js","../../build/js/hl-clip-toast.js"],"sourcesContent":["// Default class strings\r\nconst DEFAULT_BUTTON_CLASS = 'btn btn-sm btn-primary position-absolute top-0 end-0 m-2 clipboard-btn';\r\nconst DEFAULT_WRAPPER_CLASS = 'position-relative';\r\n\r\n// Default valid class lists (used if validation is enabled)\r\nconst defaultValidButtonClasses = [\r\n    'btn', 'btn-sm', 'btn-primary', 'btn-success', 'btn-danger', 'btn-warning',\r\n    'position-absolute', 'top-0', 'end-0', 'm-2', 'clipboard-btn'\r\n];\r\n\r\nconst defaultValidWrapperClasses = [\r\n    'position-relative', 'custom-wrapper-class'\r\n];\r\n\r\n// Utility: Validate a string of classes against a whitelist\r\nfunction validateClassList(classString, validClasses) {\r\n    const classList = classString.trim().split(/\\s+/);\r\n    const invalid = classList.filter(cls => !validClasses.includes(cls));\r\n    return {\r\n        isValid: invalid.length === 0,\r\n        invalidClasses: invalid\r\n    };\r\n}\r\n\r\n// Apply validation if enabled; fallback to default class if invalid\r\nfunction getValidatedClass(inputClass, fallbackClass, validList, shouldValidate, label) {\r\n    if (!shouldValidate) return inputClass;\r\n\r\n    const { isValid, invalidClasses } = validateClassList(inputClass, validList);\r\n    if (!isValid) {\r\n        console.warn(`Invalid ${label} classes provided: ${invalidClasses.join(', ')}. Default class has been assigned.`);\r\n        return fallbackClass;\r\n    }\r\n    return inputClass;\r\n}\r\n\r\n// Create the clipboard button element\r\nfunction createClipboardButton(codeElement, config) {\r\n    const shouldValidate = config.validateClasses !== false;\r\n    const buttonClass = config.buttonClass || DEFAULT_BUTTON_CLASS;\r\n\r\n    const finalButtonClass = getValidatedClass(\r\n        buttonClass,\r\n        DEFAULT_BUTTON_CLASS,\r\n        config.validButtonClasses || defaultValidButtonClasses,\r\n        shouldValidate,\r\n        'button'\r\n    );\r\n\r\n    const button = document.createElement('button');\r\n    button.className = finalButtonClass;\r\n\r\n    const icon = document.createElement('i');\r\n    icon.className = config.iconDefault || 'bi bi-clipboard';\r\n    button.appendChild(icon);\r\n\r\n    button.addEventListener('click', () => {\r\n        if (!navigator.clipboard) {\r\n            toastr.warning(config.messageClipboardUnsupported || 'Clipboard API is not available.');\r\n            return;\r\n        }\r\n\r\n        const code = codeElement.textContent;\r\n\r\n        navigator.clipboard.writeText(code).then(() => {\r\n            icon.className = config.iconSuccess || 'bi bi-check-lg';\r\n\r\n            setTimeout(() => {\r\n                icon.className = config.iconDefault || 'bi bi-clipboard';\r\n            }, config.iconResetDelay || 1500);\r\n\r\n            toastr.success(config.messageSuccess || 'Code copied to clipboard');\r\n        }).catch(() => {\r\n            toastr.error(config.messageError || 'Error copying the code');\r\n        });\r\n    });\r\n\r\n    return button;\r\n}\r\n\r\n// Enhance all <pre><code> blocks on the page\r\nfunction enhanceCodeBlocks(config = {}) {\r\n    hljs.highlightAll();\r\n\r\n    const shouldValidate = config.validateClasses !== false;\r\n    const wrapperClass = config.wrapperClass || DEFAULT_WRAPPER_CLASS;\r\n\r\n    const finalWrapperClass = getValidatedClass(\r\n        wrapperClass,\r\n        DEFAULT_WRAPPER_CLASS,\r\n        config.validWrapperClasses || defaultValidWrapperClasses,\r\n        shouldValidate,\r\n        'wrapper'\r\n    );\r\n\r\n    document.querySelectorAll('pre > code').forEach(code => {\r\n        const pre = code.parentElement;\r\n\r\n        const wrapper = document.createElement('div');\r\n        wrapper.className = finalWrapperClass;\r\n\r\n        pre.parentNode.insertBefore(wrapper, pre);\r\n        wrapper.appendChild(pre);\r\n\r\n        const button = createClipboardButton(code, config);\r\n        wrapper.appendChild(button);\r\n    });\r\n}\r\n\r\n// Public method to fire the enhancement\r\nfunction fire(config = {}) {\r\n    toastr.options = {\r\n        closeButton: config.closeButton ?? false,\r\n        progressBar: config.progressBar ?? false,\r\n        timeOut: config.timeOut ?? 1500,\r\n        escapeHtml: true,\r\n    };\r\n\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        enhanceCodeBlocks(config);\r\n    });\r\n}\r\n\r\n// Export API\r\nexport default {\r\n    fire,\r\n    enhanceCodeBlocks\r\n};\r\n","import hct from '../js/core';\r\n\r\nwindow.hct = hct;"],"names":["DEFAULT_BUTTON_CLASS","DEFAULT_WRAPPER_CLASS","defaultValidButtonClasses","defaultValidWrapperClasses","getValidatedClass","inputClass","fallbackClass","validList","shouldValidate","label","validClasses","invalid","_validateClassList","isValid","trim","split","filter","cls","includes","length","invalidClasses","console","warn","concat","join","enhanceCodeBlocks","config","arguments","undefined","hljs","highlightAll","validateClasses","finalWrapperClass","wrapperClass","validWrapperClasses","document","querySelectorAll","forEach","code","pre","parentElement","wrapper","createElement","className","parentNode","insertBefore","appendChild","button","codeElement","finalButtonClass","buttonClass","validButtonClasses","icon","iconDefault","addEventListener","navigator","clipboard","textContent","writeText","then","iconSuccess","setTimeout","iconResetDelay","toastr","success","messageSuccess","catch","error","messageError","warning","messageClipboardUnsupported","hct","fire","_config$closeButton","_config$progressBar","_config$timeOut","options","closeButton","progressBar","timeOut","escapeHtml","window"],"mappings":"AACA,IAAMA,EAAuB,yEACvBC,EAAwB,oBAGxBC,EAA4B,CAC9B,MAAO,SAAU,cAAe,cAAe,aAAc,cAC7D,oBAAqB,QAAS,QAAS,MAAO,iBAG5CC,EAA6B,CAC/B,oBAAqB,wBAczB,SAASC,EAAkBC,EAAYC,EAAeC,EAAWC,EAAgBC,GAC7E,IAAKD,EAAgB,OAAOH,EAE5B,IAboCK,EAE9BC,EAWNC,GAboCF,EAa8BH,EAV3D,CACHM,QAA4B,KAF1BF,EAWgDN,EAZxBS,OAAOC,MAAM,OACjBC,QAAAA,SAAOC,GAAG,OAAKP,EAAaQ,SAASD,EAE1CE,KAAAA,OACjBC,eAAgBT,IAQHS,EAAcR,EAAdQ,eACjB,OADeR,EAAPC,QAKDR,GAHHgB,QAAQC,KAAI,WAAAC,OAAYd,EAAKc,uBAAAA,OAAsBH,EAAeI,KAAK,6CAChElB,EAGf,CA+CA,SAASmB,IAA+B,IAAbC,EAAMC,UAAAR,OAAA,QAAAS,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAA,EAChCE,KAAKC,eAEL,IAAMtB,GAAAA,IAAiBkB,EAAOK,gBAGxBC,EAAoB5B,EAFLsB,EAAOO,cAAgBhC,EAIxCA,EACAyB,EAAOQ,qBAAuB/B,EAC9BK,EACA,WAGJ2B,SAASC,iBAAiB,cAAcC,SAAQ,SAAAC,GAC5C,IAAMC,EAAMD,EAAKE,cAEXC,EAAUN,SAASO,cAAc,OACvCD,EAAQE,UAAYX,EAEpBO,EAAIK,WAAWC,aAAaJ,EAASF,GACrCE,EAAQK,YAAYP,GAEpB,IAAMQ,EAnEd,SAA+BC,EAAatB,GACxC,IAAMlB,GAAAA,IAAiBkB,EAAOK,gBAGxBkB,EAAmB7C,EAFLsB,EAAOwB,aAAelD,EAItCA,EACA0B,EAAOyB,oBAAsBjD,EAC7BM,EACA,UAGEuC,EAASZ,SAASO,cAAc,UACtCK,EAAOJ,UAAYM,EAEnB,IAAMG,EAAOjB,SAASO,cAAc,KAyBpC,OAxBAU,EAAKT,UAAYjB,EAAO2B,aAAe,kBACvCN,EAAOD,YAAYM,GAEnBL,EAAOO,iBAAiB,SAAA,WACpB,GAAKC,UAAUC,UAAf,CAKA,IAAMlB,EAAOU,EAAYS,YAEzBF,UAAUC,UAAUE,UAAUpB,GAAMqB,MAAAA,WAChCP,EAAKT,UAAYjB,EAAOkC,aAAe,iBAEvCC,YAAAA,WACIT,EAAKT,UAAYjB,EAAO2B,aAAe,iBACxC3B,GAAAA,EAAOoC,gBAAkB,MAE5BC,OAAOC,QAAQtC,EAAOuC,gBAAkB,2BACpC,IAAAC,OAAA,WACJH,OAAOI,MAAMzC,EAAO0C,cAAgB,yBACxC,GAdA,MAFIL,OAAOM,QAAQ3C,EAAO4C,6BAA+B,kCAiB7D,IAEOvB,CACX,CAzCA,CAmE6CT,EAAMZ,GAC3Ce,EAAQK,YAAYC,EAE5B,GAAA,CAiBA,IAAewB,EAAA,CACXC,KAfJ,WAA2B,IAAAC,EAAAC,EAAAC,EAAbjD,EAAMC,UAAAR,OAAA,QAAAS,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAA,EACnBoC,OAAOa,QAAU,CACbC,YAA+B,QAApBJ,EAAE/C,EAAOmD,mBAAAA,IAAWJ,GAAAA,EAC/BK,YAA+B,QAApBJ,EAAEhD,EAAOoD,uBAAWJ,GAAAA,EAC/BK,QAAuB,QAAhBJ,EAAEjD,EAAOqD,eAAO,IAAAJ,EAAAA,EAAI,KAC3BK,YAAY,GAGhB7C,SAASmB,iBAAiB,oBAAA,WACtB7B,EAAkBC,EAE1B,GAAA,EAKID,kBAAAA,GC5HJwD,OAAOV,IAAMA"}