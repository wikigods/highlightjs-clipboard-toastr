{"version":3,"file":"hl-clip-toast.min.js","sources":["../../build/js/Core.js","../../build/js/hl-clip-toast.js"],"sourcesContent":["class Core {\r\n    // Default class strings\r\n    static DEFAULT_BUTTON_CLASS = 'btn btn-sm btn-primary position-absolute top-0 end-0 m-2 clipboard-btn';\r\n    static DEFAULT_WRAPPER_CLASS = 'position-relative';\r\n\r\n    // Default valid class lists (used if validation is enabled)\r\n    static defaultValidButtonClasses = [\r\n        'btn', 'btn-sm', 'btn-primary', 'btn-success', 'btn-danger', 'btn-warning',\r\n        'position-absolute', 'top-0', 'end-0', 'm-2', 'clipboard-btn'\r\n    ];\r\n\r\n    static defaultValidWrapperClasses = [\r\n        'position-relative', 'custom-wrapper-class'\r\n    ];\r\n\r\n    constructor(config = {}) {\r\n        this.config = {\r\n            iconDefault: 'bi bi-clipboard',\r\n            iconSuccess: 'bi bi-check-lg',\r\n            iconResetDelay: 2000,\r\n            messageSuccess: 'Code copied to clipboard',\r\n            messageError: 'Error copying the code',\r\n            messageClipboardUnsupported: 'Clipboard API is not available.',\r\n            buttonClass: Core.DEFAULT_BUTTON_CLASS,\r\n            wrapperClass: Core.DEFAULT_WRAPPER_CLASS,\r\n            closeButton: true,\r\n            progressBar: true,\r\n            timeOut: 3000,\r\n            validateClasses: true,\r\n            validButtonClasses: Core.defaultValidButtonClasses,\r\n            validWrapperClasses: Core.defaultValidWrapperClasses,\r\n            ...config\r\n        };\r\n    }\r\n\r\n    // Utility: Validate a string of classes against a whitelist\r\n    validateClassList(classString, validClasses) {\r\n        const classList = classString.trim().split(/\\s+/);\r\n        const invalid = classList.filter(cls => !validClasses.includes(cls));\r\n        return {\r\n            isValid: invalid.length === 0,\r\n            invalidClasses: invalid\r\n        };\r\n    }\r\n\r\n    // Apply validation if enabled; fallback to default class if invalid\r\n    getValidatedClass(inputClass, fallbackClass, validList, shouldValidate, label) {\r\n        if (!shouldValidate) return inputClass;\r\n\r\n        const { isValid, invalidClasses } = this.validateClassList(inputClass, validList);\r\n        if (!isValid) {\r\n            console.warn(`Invalid ${label} classes provided: ${invalidClasses.join(', ')}. Default class has been assigned.`);\r\n            return fallbackClass;\r\n        }\r\n        return inputClass;\r\n    }\r\n\r\n    // Create the clipboard button element\r\n    createClipboardButton(codeElement) {\r\n        const shouldValidate = this.config.validateClasses !== false;\r\n        const buttonClass = this.config.buttonClass || Core.DEFAULT_BUTTON_CLASS;\r\n\r\n        const finalButtonClass = this.getValidatedClass(\r\n            buttonClass,\r\n            Core.DEFAULT_BUTTON_CLASS,\r\n            this.config.validButtonClasses,\r\n            shouldValidate,\r\n            'button'\r\n        );\r\n\r\n        const button = document.createElement('button');\r\n        button.className = finalButtonClass;\r\n\r\n        const icon = document.createElement('i');\r\n        icon.className = this.config.iconDefault || 'bi bi-clipboard';\r\n        button.appendChild(icon);\r\n\r\n        button.addEventListener('click', () => {\r\n            if (!navigator.clipboard) {\r\n                toastr.warning(this.config.messageClipboardUnsupported || 'Clipboard API is not available.');\r\n                return;\r\n            }\r\n\r\n            const code = codeElement.textContent;\r\n\r\n            navigator.clipboard.writeText(code).then(() => {\r\n                icon.className = this.config.iconSuccess || 'bi bi-check-lg';\r\n\r\n                setTimeout(() => {\r\n                    icon.className = this.config.iconDefault || 'bi bi-clipboard';\r\n                }, this.config.iconResetDelay || 1500);\r\n\r\n                toastr.success(this.config.messageSuccess || 'Code copied to clipboard');\r\n            }).catch(() => {\r\n                toastr.error(this.config.messageError || 'Error copying the code');\r\n            });\r\n        });\r\n\r\n        return button;\r\n    }\r\n\r\n    // Enhance all <pre><code> blocks on the page\r\n    enhanceCodeBlocks() {\r\n        hljs.highlightAll();\r\n\r\n        const shouldValidate = this.config.validateClasses !== false;\r\n        const wrapperClass = this.config.wrapperClass || Core.DEFAULT_WRAPPER_CLASS;\r\n\r\n        const finalWrapperClass = this.getValidatedClass(\r\n            wrapperClass,\r\n            Core.DEFAULT_WRAPPER_CLASS,\r\n            this.config.validWrapperClasses,\r\n            shouldValidate,\r\n            'wrapper'\r\n        );\r\n\r\n        document.querySelectorAll('pre > code').forEach(code => {\r\n            const pre = code.parentElement;\r\n\r\n            const wrapper = document.createElement('div');\r\n            wrapper.className = finalWrapperClass;\r\n\r\n            pre.parentNode.insertBefore(wrapper, pre);\r\n            wrapper.appendChild(pre);\r\n\r\n            const button = this.createClipboardButton(code);\r\n            wrapper.appendChild(button);\r\n        });\r\n    }\r\n\r\n    // Public method to fire the enhancement\r\n    fire() {\r\n        toastr.options = {\r\n            closeButton: this.config.closeButton ?? false,\r\n            progressBar: this.config.progressBar ?? false,\r\n            timeOut: this.config.timeOut ?? 1500,\r\n            escapeHtml: true,\r\n        };\r\n\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            this.enhanceCodeBlocks();\r\n        });\r\n    }\r\n\r\n    greet() {\r\n        console.log(`Hello from Core! Config:`, this.config);\r\n    }\r\n}\r\n\r\n// Exporta la clase Core como HCT\r\nexport default Core;\r\n","import Core from './Core';\r\n\r\n// Exponer Core en el objeto global `window` como `HCT`\r\nwindow.HCT = Core;"],"names":["Core","config","arguments","length","this","iconDefault","iconSuccess","iconResetDelay","messageSuccess","messageError","messageClipboardUnsupported","buttonClass","DEFAULT_BUTTON_CLASS","wrapperClass","DEFAULT_WRAPPER_CLASS","closeButton","progressBar","timeOut","validateClasses","validButtonClasses","defaultValidButtonClasses","validWrapperClasses","defaultValidWrapperClasses","key","value","classString","validClasses","invalid","trim","split","filter","cls","includes","isValid","invalidClasses","inputClass","fallbackClass","validList","shouldValidate","label","_this$validateClassLi","validateClassList","console","warn","concat","join","codeElement","_this","finalButtonClass","getValidatedClass","button","document","createElement","className","icon","appendChild","addEventListener","navigator","clipboard","code","textContent","writeText","then","setTimeout","toastr","success","catch","error","warning","_this2","hljs","highlightAll","finalWrapperClass","querySelectorAll","forEach","pre","parentElement","wrapper","parentNode","insertBefore","createClipboardButton","_this$config$closeBut","_this$config$progress","_this$config$timeOut","_this3","options","escapeHtml","enhanceCodeBlocks","log","_defineProperty","window","HCT"],"mappings":"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"}